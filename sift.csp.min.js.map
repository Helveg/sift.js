{"version":3,"sources":["webpack://sift/webpack/universalModuleDefinition","webpack://sift/webpack/bootstrap","webpack://sift/./src/utils.ts","webpack://sift/./src/core.ts","webpack://sift/./src/index.ts","webpack://sift/./src/operations.ts"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","typeChecker","type","typeString","getClassName","toString","comparable","Date","getTime","isArray","map","toJSON","isObject","isFunction","isVanillaObject","constructor","Array","equals","a","b","length","length_1","keys","hasNestedProperty","parts","String","split","current","nope","extendStatics","__extends","setPrototypeOf","__proto__","__","__spreadArrays","il","arguments","k","j","jl","utils_1","walkKeyPathValues","item","keyPath","next","depth","owner","currentKey","isNaN","Number","BaseOperation","params","owneryQuery","options","init","reset","done","success","GroupOperation","_super","_children","_this","length_2","childrenNext","length_3","childOperation","QueryOperation","apply","parent","NestedOperation","children","_nextNestedValue","createTester","compare","Function","RegExp","test","comparableA","EqualsOperation","_test","NopeOperation","numericalOperationCreator","createNumericalOperation","createOperation","parentQuery","operationCreator","operations","Error","createNestedOperation","nestedQuery","query","charAt","containsOperation","_a","createQueryOperations","selfOperations","createQueryOperation","nestedOperations","ops","$eq","op","push","operations_1","core_1","default","_b","operation","assign","creators","$Ne","$ElemMatch","_queryOperation","$Not","$Or","_ops","$Nor","$Exists","$And","$lt","$lte","$gt","$gte","$and","ownerQuery","$all","$mod","mod","equalsValue","$or","$nor","$options","$regex","pattern","$ne","$nin","$size","$in","$type","clazz","$elemMatch","$exists","$not","$where"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAc,KAAID,IAElBD,EAAW,KAAIC,IARjB,CASGK,MAAM,WACT,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUP,QAGnC,IAAIC,EAASI,EAAiBE,GAAY,CACzCC,EAAGD,EACHE,GAAG,EACHT,QAAS,IAUV,OANAU,EAAQH,GAAUI,KAAKV,EAAOD,QAASC,EAAQA,EAAOD,QAASM,GAG/DL,EAAOQ,GAAI,EAGJR,EAAOD,QA0Df,OArDAM,EAAoBM,EAAIF,EAGxBJ,EAAoBO,EAAIR,EAGxBC,EAAoBQ,EAAI,SAASd,EAASe,EAAMC,GAC3CV,EAAoBW,EAAEjB,EAASe,IAClCG,OAAOC,eAAenB,EAASe,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEV,EAAoBgB,EAAI,SAAStB,GACX,oBAAXuB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAenB,EAASuB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAShC,GAChC,IAAIe,EAASf,GAAUA,EAAO2B,WAC7B,WAAwB,OAAO3B,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAK,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG7B,EAAoBgC,EAAI,GAIjBhC,EAAoBA,EAAoBiC,EAAI,G,+BCjFrDrB,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,IACtDzB,EAAQwC,YAAc,SAAUC,GAC5B,IAAIC,EAAa,WAAaD,EAAO,IACrC,OAAO,SAAUhB,GACb,OAAOzB,EAAQ2C,aAAalB,KAAWiB,IAG/C1C,EAAQ2C,aAAe,SAAUlB,GAAS,OAAOP,OAAOkB,UAAUQ,SAASjC,KAAKc,IAChFzB,EAAQ6C,WAAa,SAAUpB,GAC3B,OAAIA,aAAiBqB,KACVrB,EAAMsB,UAER/C,EAAQgD,QAAQvB,GACdA,EAAMwB,IAAIjD,EAAQ6C,YAEpBpB,GAAiC,mBAAjBA,EAAMyB,OACpBzB,EAAMyB,SAEVzB,GAEXzB,EAAQgD,QAAUhD,EAAQwC,YAAY,SACtCxC,EAAQmD,SAAWnD,EAAQwC,YAAY,UACvCxC,EAAQoD,WAAapD,EAAQwC,YAAY,YACzCxC,EAAQqD,gBAAkB,SAAU5B,GAChC,OAAQA,IACHA,EAAM6B,cAAgBpC,QACnBO,EAAM6B,cAAgBC,OACW,wCAAjC9B,EAAM6B,YAAYV,YACe,uCAAjCnB,EAAM6B,YAAYV,cACrBnB,EAAMyB,QAEflD,EAAQwD,OAAS,SAAUC,EAAGC,GAC1B,GAAS,MAALD,GAAaA,GAAKC,EAClB,OAAO,EAEX,GAAID,IAAMC,EACN,OAAO,EAEX,GAAIxC,OAAOkB,UAAUQ,SAASjC,KAAK8C,KAAOvC,OAAOkB,UAAUQ,SAASjC,KAAK+C,GACrE,OAAO,EAEX,GAAI1D,EAAQgD,QAAQS,GAAI,CACpB,GAAIA,EAAEE,SAAWD,EAAEC,OACf,OAAO,EAEX,IAAK,IAAInD,EAAI,EAAGoD,EAAWH,EAAEE,OAAQnD,EAAIoD,EAAUpD,IAC/C,IAAKR,EAAQwD,OAAOC,EAAEjD,GAAIkD,EAAElD,IACxB,OAAO,EAEf,OAAO,EAEN,GAAIR,EAAQmD,SAASM,GAAI,CAC1B,GAAIvC,OAAO2C,KAAKJ,GAAGE,SAAWzC,OAAO2C,KAAKH,GAAGC,OACzC,OAAO,EAEX,IAAK,IAAI5B,KAAO0B,EACZ,IAAKzD,EAAQwD,OAAOC,EAAE1B,GAAM2B,EAAE3B,IAC1B,OAAO,EAEf,OAAO,EAEX,OAAO,GAEX/B,EAAQ8D,kBAAoB,SAAU5B,EAAQH,GAC1C,IAAIgC,EAAQC,OAAOjC,GAAKkC,MAAM,KAC1BC,EAAUhC,EACd,GAAqB,IAAjB6B,EAAMJ,OACN,OAAOO,EAAQ7B,eAAeN,GAElC,IAAK,IAAIvB,EAAI,EAAGyB,EAAI8B,EAAMJ,OAAS,EAAGnD,EAAIyB,EAAGzB,IAEzC,KADA0D,EAAUA,EAAQH,EAAMvD,KAEpB,OAAO,EAEf,OAAO0D,EAAQ7B,eAAe0B,EAAMA,EAAMJ,OAAS,KAEvD3D,EAAQmE,KAAO,WAAc,OAAO,I,6BC5EpC,IACQC,EADJC,EAAajE,MAAQA,KAAKiE,YACtBD,EAAgB,SAAUtD,EAAG4C,GAI7B,OAHAU,EAAgBlD,OAAOoD,gBAClB,CAAEC,UAAW,cAAgBhB,OAAS,SAAUzC,EAAG4C,GAAK5C,EAAEyD,UAAYb,IACvE,SAAU5C,EAAG4C,GAAK,IAAK,IAAIpB,KAAKoB,EAAOA,EAAErB,eAAeC,KAAIxB,EAAEwB,GAAKoB,EAAEpB,MACpDxB,EAAG4C,IAErB,SAAU5C,EAAG4C,GAEhB,SAASc,IAAOpE,KAAKkD,YAAcxC,EADnCsD,EAActD,EAAG4C,GAEjB5C,EAAEsB,UAAkB,OAANsB,EAAaxC,OAAOY,OAAO4B,IAAMc,EAAGpC,UAAYsB,EAAEtB,UAAW,IAAIoC,KAGnFC,EAAkBrE,MAAQA,KAAKqE,gBAAmB,WAClD,IAAK,IAAIlC,EAAI,EAAG/B,EAAI,EAAGkE,EAAKC,UAAUhB,OAAQnD,EAAIkE,EAAIlE,IAAK+B,GAAKoC,UAAUnE,GAAGmD,OACxE,IAAIrC,EAAIiC,MAAMhB,GAAIqC,EAAI,EAA3B,IAA8BpE,EAAI,EAAGA,EAAIkE,EAAIlE,IACzC,IAAK,IAAIiD,EAAIkB,UAAUnE,GAAIqE,EAAI,EAAGC,EAAKrB,EAAEE,OAAQkB,EAAIC,EAAID,IAAKD,IAC1DtD,EAAEsD,GAAKnB,EAAEoB,GACjB,OAAOvD,GAEXJ,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,IACtD,IAAIsD,EAAU,EAAQ,GAKlBC,EAAoB,SAAUC,EAAMC,EAASC,EAAMC,EAAOrD,EAAKsD,GAC/D,IAAIC,EAAaJ,EAAQE,GAGzB,GAAIL,EAAQ/B,QAAQiC,IAASM,MAAMC,OAAOF,IACtC,IAAK,IAAI9E,EAAI,EAAGoD,EAAWqB,EAAKtB,OAAQnD,EAAIoD,EAAUpD,IAGlD,IAAKwE,EAAkBC,EAAKzE,GAAI0E,EAASC,EAAMC,EAAO5E,EAAGyE,GACrD,OAAO,EAInB,OAAIG,IAAUF,EAAQvB,QAAkB,MAARsB,EACrBE,EAAKF,EAAMlD,EAAKsD,GAEpBL,EAAkBC,EAAKK,GAAaJ,EAASC,EAAMC,EAAQ,EAAGE,EAAYL,IAEjFQ,EAA+B,WAC/B,SAASA,EAAcC,EAAQC,EAAaC,GACxCxF,KAAKsF,OAASA,EACdtF,KAAKuF,YAAcA,EACnBvF,KAAKwF,QAAUA,EACfxF,KAAKyF,OAOT,OALAJ,EAAcrD,UAAUyD,KAAO,aAC/BJ,EAAcrD,UAAU0D,MAAQ,WAC5B1F,KAAK2F,MAAO,EACZ3F,KAAK4F,SAAU,GAEZP,EAZuB,GAclCzF,EAAQyF,cAAgBA,EACxB,IAAIQ,EAAgC,SAAUC,GAE1C,SAASD,EAAeP,EAAQC,EAAaC,EAASO,GAClD,IAAIC,EAAQF,EAAOvF,KAAKP,KAAMsF,EAAQC,EAAaC,IAAYxF,KAE/D,OADAgG,EAAMD,UAAYA,EACXC,EAkCX,OAtCA/B,EAAU4B,EAAgBC,GAQ1BD,EAAe7D,UAAU0D,MAAQ,WAC7B1F,KAAK4F,SAAU,EACf5F,KAAK2F,MAAO,EACZ,IAAK,IAAIvF,EAAI,EAAG6F,EAAWjG,KAAK+F,UAAUxC,OAAQnD,EAAI6F,EAAU7F,IAC5DJ,KAAK+F,UAAU3F,GAAGsF,SAK1BG,EAAe7D,UAAUkE,aAAe,SAAUrB,EAAMlD,EAAKsD,GAGzD,IAFA,IAAIU,GAAO,EACPC,GAAU,EACLxF,EAAI,EAAG+F,EAAWnG,KAAK+F,UAAUxC,OAAQnD,EAAI+F,EAAU/F,IAAK,CACjE,IAAIgG,EAAiBpG,KAAK+F,UAAU3F,GAKpC,GAJAgG,EAAerB,KAAKF,EAAMlD,EAAKsD,GAC1BmB,EAAeR,UAChBA,GAAU,GAEVQ,EAAeT,MACf,IAAKS,EAAeR,QAChB,WAIJD,GAAO,EAGf3F,KAAK2F,KAAOA,EACZ3F,KAAK4F,QAAUA,GAEZC,EAvCwB,CAwCjCR,GACFzF,EAAQiG,eAAiBA,EACzB,IAAIQ,EAAgC,SAAUP,GAE1C,SAASO,IACL,OAAkB,OAAXP,GAAmBA,EAAOQ,MAAMtG,KAAMuE,YAAcvE,KAO/D,OATAiE,EAAUoC,EAAgBP,GAM1BO,EAAerE,UAAU+C,KAAO,SAAUF,EAAMlD,EAAK4E,GACjDvG,KAAKkG,aAAarB,EAAMlD,EAAK4E,IAE1BF,EAVwB,CAWjCR,GACFjG,EAAQyG,eAAiBA,EACzB,IAAIG,EAAiC,SAAUV,GAE3C,SAASU,EAAgB1B,EAASQ,EAAQC,EAAaC,EAASiB,GAC5D,IAAIT,EAAQF,EAAOvF,KAAKP,KAAMsF,EAAQC,EAAaC,EAASiB,IAAazG,KAQzE,OAPAgG,EAAMlB,QAAUA,EAGhBkB,EAAMU,iBAAmB,SAAUrF,EAAOM,EAAKsD,GAE3C,OADAe,EAAME,aAAa7E,EAAOM,EAAKsD,IACvBe,EAAML,MAEXK,EAOX,OAjBA/B,EAAUuC,EAAiBV,GAc3BU,EAAgBxE,UAAU+C,KAAO,SAAUF,EAAMlD,EAAK4E,GAClD3B,EAAkBC,EAAM7E,KAAK8E,QAAS9E,KAAK0G,iBAAkB,EAAG/E,EAAK4E,IAElEC,EAlByB,CAmBlCX,GACFjG,EAAQ4G,gBAAkBA,EAC1B5G,EAAQ+G,aAAe,SAAUtD,EAAGuD,GAChC,GAAIvD,aAAawD,SACb,OAAOxD,EAEX,GAAIA,aAAayD,OACb,OAAO,SAAUxD,GAAK,MAAoB,iBAANA,GAAkBD,EAAE0D,KAAKzD,IAEjE,IAAI0D,EAAcpH,EAAQ6C,WAAWY,GACrC,OAAO,SAAUC,GAAK,OAAOsD,EAAQI,EAAapH,EAAQ6C,WAAWa,MAEzE1D,EAAQ6C,WAAa,SAAUY,GAC3B,OAAIA,aAAaX,KACNW,EAAEV,UAETgC,EAAQ/B,QAAQS,GACTA,EAAER,IAAIjD,EAAQ6C,YAErBY,GAAyB,mBAAbA,EAAEP,OACPO,EAAEP,SAENO,GAEX,IAAI4D,EAAiC,SAAUnB,GAE3C,SAASmB,IACL,OAAkB,OAAXnB,GAAmBA,EAAOQ,MAAMtG,KAAMuE,YAAcvE,KAW/D,OAbAiE,EAAUgD,EAAiBnB,GAI3BmB,EAAgBjF,UAAUyD,KAAO,WAC7BzF,KAAKkH,MAAQtH,EAAQ+G,aAAa3G,KAAKsF,OAAQtF,KAAKwF,QAAQoB,UAEhEK,EAAgBjF,UAAU+C,KAAO,SAAUF,EAAMlD,EAAK4E,GAC9CvG,KAAKkH,MAAMrC,EAAMlD,EAAK4E,KACtBvG,KAAK2F,MAAO,EACZ3F,KAAK4F,SAAU,IAGhBqB,EAdyB,CAelC5B,GACFzF,EAAQqH,gBAAkBA,EAC1B,IAAIE,EAA+B,SAAUrB,GAEzC,SAASqB,IACL,OAAkB,OAAXrB,GAAmBA,EAAOQ,MAAMtG,KAAMuE,YAAcvE,KAM/D,OARAiE,EAAUkD,EAAerB,GAIzBqB,EAAcnF,UAAU+C,KAAO,WAC3B/E,KAAK2F,MAAO,EACZ3F,KAAK4F,SAAU,GAEZuB,EATuB,CAUhC9B,GACFzF,EAAQuH,cAAgBA,EACxBvH,EAAQwH,0BAA4B,SAAUC,GAA4B,OAAO,SAAU/B,EAAQC,EAAaC,GAAW,OAAiB,MAAVF,EAAiB,IAAI6B,EAAc7B,EAAQC,EAAaC,GAAW6B,EAAyB/B,EAAQC,EAAaC,KACnP,IAAI8B,EAAkB,SAAU3G,EAAM2E,EAAQiC,EAAa/B,GACvD,IAAIgC,EAAmBhC,EAAQiC,WAAW9G,GAC1C,IAAK6G,EACD,MAAM,IAAIE,MAAM,0BAA4B/G,GAEhD,OAAO6G,EAAiBlC,EAAQiC,EAAa/B,IAS7CmC,EAAwB,SAAU7C,EAAS8C,EAAarC,EAAaC,GACrE,GARoB,SAAUqC,GAC9B,IAAK,IAAIlG,KAAOkG,EACZ,GAAsB,MAAlBlG,EAAImG,OAAO,GACX,OAAO,EAEf,OAAO,EAGHC,CAAkBH,GAAc,CAChC,IAAII,EAAKC,EAAsBL,EAAapC,GAAU0C,EAAiBF,EAAG,GAC1E,GADiGA,EAAG,GAC/EzE,OACjB,MAAM,IAAImE,MAAM,oEAEpB,OAAO,IAAIlB,EAAgB1B,EAAS8C,EAAarC,EAAaC,EAAS0C,GAE3E,OAAO,IAAI1B,EAAgB1B,EAAS8C,EAAarC,EAAaC,EAAS,CACnE,IAAIyB,EAAgBW,EAAarC,EAAaC,MAGtD5F,EAAQuI,qBAAuB,SAAUN,EAAOtC,EAAaC,GACzD,IAAIwC,EAAKC,EAAsBJ,EAAOrC,GAAU0C,EAAiBF,EAAG,GAAII,EAAmBJ,EAAG,GAC1FK,EAAMhE,EAAe,CACrB,IAAImC,EAAgB,GAAIqB,EAAOtC,EAAaC,EAAS0C,IACtDE,GACH,OAAmB,IAAfC,EAAI9E,OACG8E,EAAI,GAER,IAAIhC,EAAewB,EAAOtC,EAAaC,EAAS6C,IAE3D,IAAIJ,EAAwB,SAAUJ,EAAOrC,GACzC,IAAI0C,EAAiB,GACjBE,EAAmB,GAIvB,IAAK,IAAIzG,KAHJgD,EAAQ1B,gBAAgB4E,KACzBA,EAAQ,CAAES,IAAKT,IAEHA,EACZ,GAAsB,MAAlBlG,EAAImG,OAAO,GAAY,CACvB,IAAIS,EAAKjB,EAAgB3F,EAAKkG,EAAMlG,GAAMkG,EAAOrC,GAEvC,MAAN+C,GACAL,EAAeM,KAAKD,QAIxBH,EAAiBI,KAAKb,EAAsBhG,EAAIkC,MAAM,KAAMgE,EAAMlG,GAAMkG,EAAOrC,IAGvF,MAAO,CAAC0C,EAAgBE,K,6DCjP5BtH,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,IACtD,IAAIoH,EAAe,EAAQ,GACvBC,EAAS,EAAQ,GACjB/D,EAAU,EAAQ,GAatB/E,EAAQ+I,QAZe,SAAUd,EAAOG,GACpC,IAAIY,OAAY,IAAPZ,EAAgB,GAAKA,EAAIpB,EAAUgC,EAAGhC,QAASa,EAAamB,EAAGnB,WACpEoB,EAAYH,EAAOP,qBAAqBN,EAAO,KAAM,CACrDjB,QAASA,GAAWjC,EAAQvB,OAC5BqE,WAAY3G,OAAOgI,OAAO,GAAIL,EAAaM,SAAUtB,GAAc,MAEvE,OAAO,SAAU5C,EAAMlD,EAAKsD,GAGxB,OAFA4D,EAAUnD,QACVmD,EAAU9D,KAAKF,EAAMlD,EAAKsD,GACnB4D,EAAUjD,W,6BCbzB,IACQ5B,EADJC,EAAajE,MAAQA,KAAKiE,YACtBD,EAAgB,SAAUtD,EAAG4C,GAI7B,OAHAU,EAAgBlD,OAAOoD,gBAClB,CAAEC,UAAW,cAAgBhB,OAAS,SAAUzC,EAAG4C,GAAK5C,EAAEyD,UAAYb,IACvE,SAAU5C,EAAG4C,GAAK,IAAK,IAAIpB,KAAKoB,EAAOA,EAAErB,eAAeC,KAAIxB,EAAEwB,GAAKoB,EAAEpB,MACpDxB,EAAG4C,IAErB,SAAU5C,EAAG4C,GAEhB,SAASc,IAAOpE,KAAKkD,YAAcxC,EADnCsD,EAActD,EAAG4C,GAEjB5C,EAAEsB,UAAkB,OAANsB,EAAaxC,OAAOY,OAAO4B,IAAMc,EAAGpC,UAAYsB,EAAEtB,UAAW,IAAIoC,KAGvFtD,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,IACtD,IAAIqH,EAAS,EAAQ,GACjB/D,EAAU,EAAQ,GAClBqE,EAAqB,SAAUlD,GAE/B,SAASkD,IACL,OAAkB,OAAXlD,GAAmBA,EAAOQ,MAAMtG,KAAMuE,YAAcvE,KAe/D,OAjBAiE,EAAU+E,EAAKlD,GAIfkD,EAAIhH,UAAUyD,KAAO,WACjBzF,KAAKkH,MAAQwB,EAAO/B,aAAa3G,KAAKsF,OAAQtF,KAAKwF,QAAQoB,UAE/DoC,EAAIhH,UAAU0D,MAAQ,WAClBI,EAAO9D,UAAU0D,MAAMnF,KAAKP,MAC5BA,KAAK4F,SAAU,GAEnBoD,EAAIhH,UAAU+C,KAAO,SAAUF,GACvB7E,KAAKkH,MAAMrC,KACX7E,KAAK2F,MAAO,EACZ3F,KAAK4F,SAAU,IAGhBoD,EAlBa,CAmBtBN,EAAOrD,eACL4D,EAA4B,SAAUnD,GAEtC,SAASmD,IACL,OAAkB,OAAXnD,GAAmBA,EAAOQ,MAAMtG,KAAMuE,YAAcvE,KAa/D,OAfAiE,EAAUgF,EAAYnD,GAItBmD,EAAWjH,UAAUyD,KAAO,WACxBzF,KAAKkJ,gBAAkBR,EAAOP,qBAAqBnI,KAAKsF,OAAQtF,KAAKuF,YAAavF,KAAKwF,UAE3FyD,EAAWjH,UAAU0D,MAAQ,WACzB1F,KAAKkJ,gBAAgBxD,SAEzBuD,EAAWjH,UAAU+C,KAAO,SAAUF,EAAMlD,EAAKsD,GAC7CjF,KAAKkJ,gBAAgBnE,KAAKF,EAAMlD,EAAKsD,GACrCjF,KAAK2F,KAAO3F,KAAKkJ,gBAAgBvD,KACjC3F,KAAK4F,QAAU5F,KAAKkJ,gBAAgBtD,SAEjCqD,EAhBoB,CAiB7BP,EAAOrD,eACL8D,EAAsB,SAAUrD,GAEhC,SAASqD,IACL,OAAkB,OAAXrD,GAAmBA,EAAOQ,MAAMtG,KAAMuE,YAAcvE,KAM/D,OARAiE,EAAUkF,EAAMrD,GAIhBqD,EAAKnH,UAAU+C,KAAO,SAAUF,EAAMlD,EAAKsD,GACvCa,EAAO9D,UAAU+C,KAAKxE,KAAKP,KAAM6E,EAAMlD,EAAKsD,GAC5CjF,KAAK4F,SAAW5F,KAAK4F,SAElBuD,EATc,CAUvBF,GACEG,EAAqB,SAAUtD,GAE/B,SAASsD,IACL,OAAkB,OAAXtD,GAAmBA,EAAOQ,MAAMtG,KAAMuE,YAAcvE,KA4B/D,OA9BAiE,EAAUmF,EAAKtD,GAIfsD,EAAIpH,UAAUyD,KAAO,WACjB,IAAIO,EAAQhG,KACZA,KAAKqJ,KAAOrJ,KAAKsF,OAAOzC,KAAI,SAAU0F,GAAM,OAAOG,EAAOP,qBAAqBI,EAAI,KAAMvC,EAAMR,aAEnG4D,EAAIpH,UAAU0D,MAAQ,WAClB1F,KAAK2F,MAAO,EACZ3F,KAAK4F,SAAU,EACf,IAAK,IAAIxF,EAAI,EAAGoD,EAAWxD,KAAKqJ,KAAK9F,OAAQnD,EAAIoD,EAAUpD,IACvDJ,KAAKqJ,KAAKjJ,GAAGsF,SAGrB0D,EAAIpH,UAAU+C,KAAO,SAAUF,EAAMlD,EAAKsD,GAGtC,IAFA,IAAIU,GAAO,EACPC,GAAU,EACLxF,EAAI,EAAG6F,EAAWjG,KAAKqJ,KAAK9F,OAAQnD,EAAI6F,EAAU7F,IAAK,CAC5D,IAAImI,EAAKvI,KAAKqJ,KAAKjJ,GAEnB,GADAmI,EAAGxD,KAAKF,EAAMlD,EAAKsD,GACfsD,EAAG3C,QAAS,CACZD,GAAO,EACPC,EAAU2C,EAAG3C,QACb,OAGR5F,KAAK4F,QAAUA,EACf5F,KAAK2F,KAAOA,GAETyD,EA/Ba,CAgCtBV,EAAOrD,eACLiE,EAAsB,SAAUxD,GAEhC,SAASwD,IACL,OAAkB,OAAXxD,GAAmBA,EAAOQ,MAAMtG,KAAMuE,YAAcvE,KAM/D,OARAiE,EAAUqF,EAAMxD,GAIhBwD,EAAKtH,UAAU+C,KAAO,SAAUF,EAAMlD,EAAKsD,GACvCa,EAAO9D,UAAU+C,KAAKxE,KAAKP,KAAM6E,EAAMlD,EAAKsD,GAC5CjF,KAAK4F,SAAW5F,KAAK4F,SAElB0D,EATc,CAUvBF,GACEG,EAAyB,SAAUzD,GAEnC,SAASyD,IACL,OAAkB,OAAXzD,GAAmBA,EAAOQ,MAAMtG,KAAMuE,YAAcvE,KAQ/D,OAVAiE,EAAUsF,EAASzD,GAInByD,EAAQvH,UAAU+C,KAAO,SAAUF,EAAMlD,EAAKsD,GACtCA,EAAMhD,eAAeN,KAAS3B,KAAKsF,SACnCtF,KAAK2F,MAAO,EACZ3F,KAAK4F,SAAU,IAGhB2D,EAXiB,CAY1Bb,EAAOrD,eACLmE,EAAsB,SAAU1D,GAEhC,SAAS0D,EAAKlE,EAAQC,EAAaC,GAC/B,OAAOM,EAAOvF,KAAKP,KAAMsF,EAAQC,EAAaC,EAASF,EAAOzC,KAAI,SAAUgF,GAAS,OAAOa,EAAOP,qBAAqBN,EAAOtC,EAAaC,QAAiBxF,KAKjK,OAPAiE,EAAUuF,EAAM1D,GAIhB0D,EAAKxH,UAAU+C,KAAO,SAAUF,EAAMlD,EAAKsD,GACvCjF,KAAKkG,aAAarB,EAAMlD,EAAKsD,IAE1BuE,EARc,CASvBd,EAAO7C,gBAUL4D,EAAMf,EAAOtB,2BAA0B,SAAU9B,EAAQC,EAAaC,GAAW,OAAO,IAAIkD,EAAOzB,iBAAgB,SAAU3D,GAAK,OAAOA,EAAIgC,IAAWC,EAAaC,MACrKkE,EAAOhB,EAAOtB,2BAA0B,SAAU9B,EAAQC,EAAaC,GAAW,OAAO,IAAIkD,EAAOzB,iBAAgB,SAAU3D,GAAK,OAAOA,GAAKgC,IAAWC,EAAaC,MACvKmE,EAAMjB,EAAOtB,2BAA0B,SAAU9B,EAAQC,EAAaC,GAAW,OAAO,IAAIkD,EAAOzB,iBAAgB,SAAU3D,GAAK,OAAOA,EAAIgC,IAAWC,EAAaC,MACrKoE,EAAOlB,EAAOtB,2BAA0B,SAAU9B,EAAQC,EAAaC,GAAW,OAAO,IAAIkD,EAAOzB,iBAAgB,SAAU3D,GAAK,OAAOA,GAAKgC,IAAWC,EAAaC,MASvKqE,EAAO,SAAUvE,EAAQwE,EAAYtE,GAAW,OAAO,IAAIgE,EAAKlE,EAAQwE,EAAYtE,IACpFuE,EAAOF,EAgBXjK,EAAQmJ,SAAW,CACfU,IAAKA,EACLC,KAAMA,EACNM,KA5BO,SAAUhC,EAAIzC,EAAaC,GAClC,IAAIyE,EAAMjC,EAAG,GAAIkC,EAAclC,EAAG,GAClC,OAAO,IAAIU,EAAOzB,iBAAgB,SAAU3D,GAAK,OAAOqB,EAAQlC,WAAWa,GAAK2G,IAAQC,IAAgB3E,EAAaC,IA2BrHmE,IAAKA,EACLC,KAAMA,EACNtB,IA5CM,SAAUhD,EAAQC,EAAaC,GACrC,OAAO,IAAIkD,EAAOzB,gBAAgB3B,EAAQC,EAAaC,IA4CvD2E,IAzCM,SAAU7E,EAAQC,EAAaC,GAAW,OAAO,IAAI4D,EAAI9D,EAAQC,EAAaC,IA0CpF4E,KAzCO,SAAU9E,EAAQC,EAAaC,GAAW,OAAO,IAAI8D,EAAKhE,EAAQC,EAAaC,IA0CtFqE,KAAMA,EACNQ,SAxBW,WAAc,OAAO,MAyBhCC,OA/BS,SAAUC,EAAShF,EAAaC,GAAW,OAAO,IAAIkD,EAAOzB,gBAAgB,IAAIH,OAAOyD,EAAShF,EAAY8E,UAAW9E,EAAaC,IAgC9IgF,IA/CM,SAAUlF,EAAQC,EAAaC,GAAW,OAAO,IAAIwD,EAAI1D,EAAQC,EAAaC,IAgDpFiF,KA5CO,SAAUnF,EAAQC,EAAaC,GAAW,OAAO,IAAI8D,EAAKhE,EAAQC,EAAaC,IA6CtFuE,KAAMA,EACNW,MA9BQ,SAAUpF,EAAQwE,EAAYtE,GAAW,OAAO,IAAIkD,EAAOzB,iBAAgB,SAAU3D,GAAK,OAAOA,GAAKA,EAAEC,SAAW+B,IAAWwE,EAAYtE,IA+BlJmF,IA9CM,SAAUrF,EAAQC,EAAaC,GAAW,OAAO,IAAI4D,EAAI9D,EAAQC,EAAaC,IA+CpFoF,MAnCQ,SAAUC,EAAOtF,EAAaC,GAAW,OAAO,IAAIkD,EAAOzB,iBAAgB,SAAU3D,GAAK,OAAY,MAALA,IAAaA,aAAauH,GAASvH,EAAEJ,cAAgB2H,KAAmBtF,EAAaC,IAoC9LsF,WAlDa,SAAUxF,EAAQC,EAAaC,GAAW,OAAO,IAAIyD,EAAW3D,EAAQC,EAAaC,IAmDlGuF,QAxCU,SAAUzF,EAAQC,EAAaC,GAAW,OAAO,IAAI+D,EAAQjE,EAAQC,EAAaC,IAyC5FwF,KAvCO,SAAU1F,EAAQC,EAAaC,GAAW,OAAO,IAAI2D,EAAK7D,EAAQC,EAAaC,IAwCtFyF,OAlCS,SAAU3F,EAAQwE,EAAYtE,GACvC,IAAIuB,EACJ,IAAIpC,EAAQ3B,WAAWsC,GAOnB,MAAM,IAAIoC,MAAM,oEAEpB,OARIX,EAAOzB,EAQJ,IAAIoD,EAAOzB,iBAAgB,SAAU3D,GAAK,OAAOyD,EAAKnF,KAAK0B,EAAVyD,CAAazD,KAAOwG,EAAYtE","file":"sift.csp.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"sift\"] = factory();\n\telse\n\t\troot[\"sift\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.typeChecker = function (type) {\n    var typeString = \"[object \" + type + \"]\";\n    return function (value) {\n        return exports.getClassName(value) === typeString;\n    };\n};\nexports.getClassName = function (value) { return Object.prototype.toString.call(value); };\nexports.comparable = function (value) {\n    if (value instanceof Date) {\n        return value.getTime();\n    }\n    else if (exports.isArray(value)) {\n        return value.map(exports.comparable);\n    }\n    else if (value && typeof value.toJSON === \"function\") {\n        return value.toJSON();\n    }\n    return value;\n};\nexports.isArray = exports.typeChecker(\"Array\");\nexports.isObject = exports.typeChecker(\"Object\");\nexports.isFunction = exports.typeChecker(\"Function\");\nexports.isVanillaObject = function (value) {\n    return (value &&\n        (value.constructor === Object ||\n            value.constructor === Array ||\n            value.constructor.toString() === \"function Object() { [native code] }\" ||\n            value.constructor.toString() === \"function Array() { [native code] }\") &&\n        !value.toJSON);\n};\nexports.equals = function (a, b) {\n    if (a == null && a == b) {\n        return true;\n    }\n    if (a === b) {\n        return true;\n    }\n    if (Object.prototype.toString.call(a) !== Object.prototype.toString.call(b)) {\n        return false;\n    }\n    if (exports.isArray(a)) {\n        if (a.length !== b.length) {\n            return false;\n        }\n        for (var i = 0, length_1 = a.length; i < length_1; i++) {\n            if (!exports.equals(a[i], b[i]))\n                return false;\n        }\n        return true;\n    }\n    else if (exports.isObject(a)) {\n        if (Object.keys(a).length !== Object.keys(b).length) {\n            return false;\n        }\n        for (var key in a) {\n            if (!exports.equals(a[key], b[key]))\n                return false;\n        }\n        return true;\n    }\n    return false;\n};\nexports.hasNestedProperty = function (object, key) {\n    var parts = String(key).split(\".\");\n    var current = object;\n    if (parts.length === 1) {\n        return current.hasOwnProperty(key);\n    }\n    for (var i = 0, n = parts.length - 1; i < n; i++) {\n        current = current[parts[i]];\n        if (!current)\n            return false;\n    }\n    return current.hasOwnProperty(parts[parts.length - 1]);\n};\nexports.nope = function () { return false; };\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"./utils\");\n/**\n * Walks through each value given the context - used for nested operations. E.g:\n * { \"person.address\": { $eq: \"blarg\" }}\n */\nvar walkKeyPathValues = function (item, keyPath, next, depth, key, owner) {\n    var currentKey = keyPath[depth];\n    // if array, then try matching. Might fall through for cases like:\n    // { $eq: [1, 2, 3] }, [ 1, 2, 3 ]. \n    if (utils_1.isArray(item) && isNaN(Number(currentKey))) {\n        for (var i = 0, length_1 = item.length; i < length_1; i++) {\n            // if FALSE is returned, then terminate walker. For operations, this simply\n            // means that the search critera was met.\n            if (!walkKeyPathValues(item[i], keyPath, next, depth, i, item)) {\n                return false;\n            }\n        }\n    }\n    if (depth === keyPath.length || item == null) {\n        return next(item, key, owner);\n    }\n    return walkKeyPathValues(item[currentKey], keyPath, next, depth + 1, currentKey, item);\n};\nvar BaseOperation = /** @class */ (function () {\n    function BaseOperation(params, owneryQuery, options) {\n        this.params = params;\n        this.owneryQuery = owneryQuery;\n        this.options = options;\n        this.init();\n    }\n    BaseOperation.prototype.init = function () { };\n    BaseOperation.prototype.reset = function () {\n        this.done = false;\n        this.success = false;\n    };\n    return BaseOperation;\n}());\nexports.BaseOperation = BaseOperation;\nvar GroupOperation = /** @class */ (function (_super) {\n    __extends(GroupOperation, _super);\n    function GroupOperation(params, owneryQuery, options, _children) {\n        var _this = _super.call(this, params, owneryQuery, options) || this;\n        _this._children = _children;\n        return _this;\n    }\n    /**\n     */\n    GroupOperation.prototype.reset = function () {\n        this.success = false;\n        this.done = false;\n        for (var i = 0, length_2 = this._children.length; i < length_2; i++) {\n            this._children[i].reset();\n        }\n    };\n    /**\n     */\n    GroupOperation.prototype.childrenNext = function (item, key, owner) {\n        var done = true;\n        var success = true;\n        for (var i = 0, length_3 = this._children.length; i < length_3; i++) {\n            var childOperation = this._children[i];\n            childOperation.next(item, key, owner);\n            if (!childOperation.success) {\n                success = false;\n            }\n            if (childOperation.done) {\n                if (!childOperation.success) {\n                    break;\n                }\n            }\n            else {\n                done = false;\n            }\n        }\n        this.done = done;\n        this.success = success;\n    };\n    return GroupOperation;\n}(BaseOperation));\nexports.GroupOperation = GroupOperation;\nvar QueryOperation = /** @class */ (function (_super) {\n    __extends(QueryOperation, _super);\n    function QueryOperation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     */\n    QueryOperation.prototype.next = function (item, key, parent) {\n        this.childrenNext(item, key, parent);\n    };\n    return QueryOperation;\n}(GroupOperation));\nexports.QueryOperation = QueryOperation;\nvar NestedOperation = /** @class */ (function (_super) {\n    __extends(NestedOperation, _super);\n    function NestedOperation(keyPath, params, owneryQuery, options, children) {\n        var _this = _super.call(this, params, owneryQuery, options, children) || this;\n        _this.keyPath = keyPath;\n        /**\n         */\n        _this._nextNestedValue = function (value, key, owner) {\n            _this.childrenNext(value, key, owner);\n            return !_this.done;\n        };\n        return _this;\n    }\n    /**\n     */\n    NestedOperation.prototype.next = function (item, key, parent) {\n        walkKeyPathValues(item, this.keyPath, this._nextNestedValue, 0, key, parent);\n    };\n    return NestedOperation;\n}(GroupOperation));\nexports.NestedOperation = NestedOperation;\nexports.createTester = function (a, compare) {\n    if (a instanceof Function) {\n        return a;\n    }\n    if (a instanceof RegExp) {\n        return function (b) { return typeof b === \"string\" && a.test(b); };\n    }\n    var comparableA = exports.comparable(a);\n    return function (b) { return compare(comparableA, exports.comparable(b)); };\n};\nexports.comparable = function (a) {\n    if (a instanceof Date) {\n        return a.getTime();\n    }\n    if (utils_1.isArray(a)) {\n        return a.map(exports.comparable);\n    }\n    if (a && typeof a.toJSON === \"function\") {\n        return a.toJSON();\n    }\n    return a;\n};\nvar EqualsOperation = /** @class */ (function (_super) {\n    __extends(EqualsOperation, _super);\n    function EqualsOperation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EqualsOperation.prototype.init = function () {\n        this._test = exports.createTester(this.params, this.options.compare);\n    };\n    EqualsOperation.prototype.next = function (item, key, parent) {\n        if (this._test(item, key, parent)) {\n            this.done = true;\n            this.success = true;\n        }\n    };\n    return EqualsOperation;\n}(BaseOperation));\nexports.EqualsOperation = EqualsOperation;\nvar NopeOperation = /** @class */ (function (_super) {\n    __extends(NopeOperation, _super);\n    function NopeOperation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NopeOperation.prototype.next = function () {\n        this.done = true;\n        this.success = false;\n    };\n    return NopeOperation;\n}(BaseOperation));\nexports.NopeOperation = NopeOperation;\nexports.numericalOperationCreator = function (createNumericalOperation) { return function (params, owneryQuery, options) { return params == null ? new NopeOperation(params, owneryQuery, options) : createNumericalOperation(params, owneryQuery, options); }; };\nvar createOperation = function (name, params, parentQuery, options) {\n    var operationCreator = options.operations[name];\n    if (!operationCreator) {\n        throw new Error(\"Unsupported operation: \" + name);\n    }\n    return operationCreator(params, parentQuery, options);\n};\nvar containsOperation = function (query) {\n    for (var key in query) {\n        if (key.charAt(0) === \"$\")\n            return true;\n    }\n    return false;\n};\nvar createNestedOperation = function (keyPath, nestedQuery, owneryQuery, options) {\n    if (containsOperation(nestedQuery)) {\n        var _a = createQueryOperations(nestedQuery, options), selfOperations = _a[0], nestedOperations = _a[1];\n        if (nestedOperations.length) {\n            throw new Error(\"Property queries must contain only operations, or exact objects.\");\n        }\n        return new NestedOperation(keyPath, nestedQuery, owneryQuery, options, selfOperations);\n    }\n    return new NestedOperation(keyPath, nestedQuery, owneryQuery, options, [\n        new EqualsOperation(nestedQuery, owneryQuery, options)\n    ]);\n};\nexports.createQueryOperation = function (query, owneryQuery, options) {\n    var _a = createQueryOperations(query, options), selfOperations = _a[0], nestedOperations = _a[1];\n    var ops = __spreadArrays([\n        new NestedOperation([], query, owneryQuery, options, selfOperations)\n    ], nestedOperations);\n    if (ops.length === 1) {\n        return ops[0];\n    }\n    return new QueryOperation(query, owneryQuery, options, ops);\n};\nvar createQueryOperations = function (query, options) {\n    var selfOperations = [];\n    var nestedOperations = [];\n    if (!utils_1.isVanillaObject(query)) {\n        query = { $eq: query };\n    }\n    for (var key in query) {\n        if (key.charAt(0) === \"$\") {\n            var op = createOperation(key, query[key], query, options);\n            // probably just a flag for another operation (like $options)\n            if (op != null) {\n                selfOperations.push(op);\n            }\n        }\n        else {\n            nestedOperations.push(createNestedOperation(key.split(\".\"), query[key], query, options));\n        }\n    }\n    return [selfOperations, nestedOperations];\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar operations_1 = require(\"./operations\");\nvar core_1 = require(\"./core\");\nvar utils_1 = require(\"./utils\");\nvar createRootTester = function (query, _a) {\n    var _b = _a === void 0 ? {} : _a, compare = _b.compare, operations = _b.operations;\n    var operation = core_1.createQueryOperation(query, null, {\n        compare: compare || utils_1.equals,\n        operations: Object.assign({}, operations_1.creators, operations || {})\n    });\n    return function (item, key, owner) {\n        operation.reset();\n        operation.next(item, key, owner);\n        return operation.success;\n    };\n};\nexports.default = createRootTester;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar core_1 = require(\"./core\");\nvar utils_1 = require(\"./utils\");\nvar $Ne = /** @class */ (function (_super) {\n    __extends($Ne, _super);\n    function $Ne() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    $Ne.prototype.init = function () {\n        this._test = core_1.createTester(this.params, this.options.compare);\n    };\n    $Ne.prototype.reset = function () {\n        _super.prototype.reset.call(this);\n        this.success = true;\n    };\n    $Ne.prototype.next = function (item) {\n        if (this._test(item)) {\n            this.done = true;\n            this.success = false;\n        }\n    };\n    return $Ne;\n}(core_1.BaseOperation));\nvar $ElemMatch = /** @class */ (function (_super) {\n    __extends($ElemMatch, _super);\n    function $ElemMatch() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    $ElemMatch.prototype.init = function () {\n        this._queryOperation = core_1.createQueryOperation(this.params, this.owneryQuery, this.options);\n    };\n    $ElemMatch.prototype.reset = function () {\n        this._queryOperation.reset();\n    };\n    $ElemMatch.prototype.next = function (item, key, owner) {\n        this._queryOperation.next(item, key, owner);\n        this.done = this._queryOperation.done;\n        this.success = this._queryOperation.success;\n    };\n    return $ElemMatch;\n}(core_1.BaseOperation));\nvar $Not = /** @class */ (function (_super) {\n    __extends($Not, _super);\n    function $Not() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    $Not.prototype.next = function (item, key, owner) {\n        _super.prototype.next.call(this, item, key, owner);\n        this.success = !this.success;\n    };\n    return $Not;\n}($ElemMatch));\nvar $Or = /** @class */ (function (_super) {\n    __extends($Or, _super);\n    function $Or() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    $Or.prototype.init = function () {\n        var _this = this;\n        this._ops = this.params.map(function (op) { return core_1.createQueryOperation(op, null, _this.options); });\n    };\n    $Or.prototype.reset = function () {\n        this.done = false;\n        this.success = false;\n        for (var i = 0, length_1 = this._ops.length; i < length_1; i++) {\n            this._ops[i].reset();\n        }\n    };\n    $Or.prototype.next = function (item, key, owner) {\n        var done = false;\n        var success = false;\n        for (var i = 0, length_2 = this._ops.length; i < length_2; i++) {\n            var op = this._ops[i];\n            op.next(item, key, owner);\n            if (op.success) {\n                done = true;\n                success = op.success;\n                break;\n            }\n        }\n        this.success = success;\n        this.done = done;\n    };\n    return $Or;\n}(core_1.BaseOperation));\nvar $Nor = /** @class */ (function (_super) {\n    __extends($Nor, _super);\n    function $Nor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    $Nor.prototype.next = function (item, key, owner) {\n        _super.prototype.next.call(this, item, key, owner);\n        this.success = !this.success;\n    };\n    return $Nor;\n}($Or));\nvar $Exists = /** @class */ (function (_super) {\n    __extends($Exists, _super);\n    function $Exists() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    $Exists.prototype.next = function (item, key, owner) {\n        if (owner.hasOwnProperty(key) === this.params) {\n            this.done = true;\n            this.success = true;\n        }\n    };\n    return $Exists;\n}(core_1.BaseOperation));\nvar $And = /** @class */ (function (_super) {\n    __extends($And, _super);\n    function $And(params, owneryQuery, options) {\n        return _super.call(this, params, owneryQuery, options, params.map(function (query) { return core_1.createQueryOperation(query, owneryQuery, options); })) || this;\n    }\n    $And.prototype.next = function (item, key, owner) {\n        this.childrenNext(item, key, owner);\n    };\n    return $And;\n}(core_1.GroupOperation));\nvar $eq = function (params, owneryQuery, options) {\n    return new core_1.EqualsOperation(params, owneryQuery, options);\n};\nvar $ne = function (params, owneryQuery, options) { return new $Ne(params, owneryQuery, options); };\nvar $or = function (params, owneryQuery, options) { return new $Or(params, owneryQuery, options); };\nvar $nor = function (params, owneryQuery, options) { return new $Nor(params, owneryQuery, options); };\nvar $elemMatch = function (params, owneryQuery, options) { return new $ElemMatch(params, owneryQuery, options); };\nvar $nin = function (params, owneryQuery, options) { return new $Nor(params, owneryQuery, options); };\nvar $in = function (params, owneryQuery, options) { return new $Or(params, owneryQuery, options); };\nvar $lt = core_1.numericalOperationCreator(function (params, owneryQuery, options) { return new core_1.EqualsOperation(function (b) { return b < params; }, owneryQuery, options); });\nvar $lte = core_1.numericalOperationCreator(function (params, owneryQuery, options) { return new core_1.EqualsOperation(function (b) { return b <= params; }, owneryQuery, options); });\nvar $gt = core_1.numericalOperationCreator(function (params, owneryQuery, options) { return new core_1.EqualsOperation(function (b) { return b > params; }, owneryQuery, options); });\nvar $gte = core_1.numericalOperationCreator(function (params, owneryQuery, options) { return new core_1.EqualsOperation(function (b) { return b >= params; }, owneryQuery, options); });\nvar $mod = function (_a, owneryQuery, options) {\n    var mod = _a[0], equalsValue = _a[1];\n    return new core_1.EqualsOperation(function (b) { return utils_1.comparable(b) % mod === equalsValue; }, owneryQuery, options);\n};\nvar $exists = function (params, owneryQuery, options) { return new $Exists(params, owneryQuery, options); };\nvar $regex = function (pattern, owneryQuery, options) { return new core_1.EqualsOperation(new RegExp(pattern, owneryQuery.$options), owneryQuery, options); };\nvar $not = function (params, owneryQuery, options) { return new $Not(params, owneryQuery, options); };\nvar $type = function (clazz, owneryQuery, options) { return new core_1.EqualsOperation(function (b) { return b != null ? (b instanceof clazz || b.constructor === clazz) : false; }, owneryQuery, options); };\nvar $and = function (params, ownerQuery, options) { return new $And(params, ownerQuery, options); };\nvar $all = $and;\nvar $size = function (params, ownerQuery, options) { return new core_1.EqualsOperation(function (b) { return b && b.length === params; }, ownerQuery, options); };\nvar $options = function () { return null; };\nvar $where = function (params, ownerQuery, options) {\n    var test;\n    if (utils_1.isFunction(params)) {\n        test = params;\n    }\n    else if (!process.env.CSP_ENABLED) {\n        test = new Function(\"obj\", \"return \" + params);\n    }\n    else {\n        throw new Error(\"In CSP mode, sift does not support strings in \\\"$where\\\" condition\");\n    }\n    return new core_1.EqualsOperation(function (b) { return test.bind(b)(b); }, ownerQuery, options);\n};\nexports.creators = {\n    $lt: $lt,\n    $lte: $lte,\n    $mod: $mod,\n    $gt: $gt,\n    $gte: $gte,\n    $eq: $eq,\n    $or: $or,\n    $nor: $nor,\n    $and: $and,\n    $options: $options,\n    $regex: $regex,\n    $ne: $ne,\n    $nin: $nin,\n    $all: $all,\n    $size: $size,\n    $in: $in,\n    $type: $type,\n    $elemMatch: $elemMatch,\n    $exists: $exists,\n    $not: $not,\n    $where: $where\n};\n"],"sourceRoot":""}