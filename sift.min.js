!(function(n, t) {
  "object" == typeof exports && "object" == typeof module
    ? (module.exports = t())
    : "function" == typeof define && define.amd
    ? define([], t)
    : "object" == typeof exports
    ? (exports.sift = t())
    : (n.sift = t());
})(window, function() {
  return (function(n) {
    var t = {};
    function r(e) {
      if (t[e]) return t[e].exports;
      var u = (t[e] = { i: e, l: !1, exports: {} });
      return n[e].call(u.exports, u, u.exports, r), (u.l = !0), u.exports;
    }
    return (
      (r.m = n),
      (r.c = t),
      (r.d = function(n, t, e) {
        r.o(n, t) || Object.defineProperty(n, t, { enumerable: !0, get: e });
      }),
      (r.r = function(n) {
        "undefined" != typeof Symbol &&
          Symbol.toStringTag &&
          Object.defineProperty(n, Symbol.toStringTag, { value: "Module" }),
          Object.defineProperty(n, "__esModule", { value: !0 });
      }),
      (r.t = function(n, t) {
        if ((1 & t && (n = r(n)), 8 & t)) return n;
        if (4 & t && "object" == typeof n && n && n.__esModule) return n;
        var e = Object.create(null);
        if (
          (r.r(e),
          Object.defineProperty(e, "default", { enumerable: !0, value: n }),
          2 & t && "string" != typeof n)
        )
          for (var u in n)
            r.d(
              e,
              u,
              function(t) {
                return n[t];
              }.bind(null, u)
            );
        return e;
      }),
      (r.n = function(n) {
        var t =
          n && n.__esModule
            ? function() {
                return n.default;
              }
            : function() {
                return n;
              };
        return r.d(t, "a", t), t;
      }),
      (r.o = function(n, t) {
        return Object.prototype.hasOwnProperty.call(n, t);
      }),
      (r.p = ""),
      r((r.s = 0))
    );
  })([
    function(n, t, r) {
      n.exports = r(1);
    },
    function(n, t, r) {
      "use strict";
      function e(n) {
        var t = "[object " + n + "]";
        return function(n) {
          return Object.prototype.toString.call(n) === t;
        };
      }
      r.r(t),
        r.d(t, "default", function() {
          return j;
        }),
        r.d(t, "compare", function() {
          return m;
        });
      var u = e("Array"),
        o = e("Object"),
        i = e("Function");
      function f(n) {
        return n instanceof Date
          ? n.getTime()
          : u(n)
          ? n.map(f)
          : n && "function" == typeof n.toJSON
          ? n.toJSON()
          : n;
      }
      function c(n, t) {
        return i(n.get) ? n.get(t) : n[t];
      }
      function a(n) {
        return function(t, r) {
          if (!u(r) || !r.length) return n(t, r);
          for (var e = 0, o = r.length; e < o; e++)
            if (n(t, c(r, e))) return !0;
          return !1;
        };
      }
      function l(n) {
        return function(t, r) {
          if (!u(r) || !r.length) return n(t, r);
          for (var e = 0, o = r.length; e < o; e++)
            if (!n(t, c(r, e))) return !1;
          return !0;
        };
      }
      function s(n, t, r, e) {
        return n.v(n.a, t, r, e);
      }
      var p = {
          $eq: a(function(n, t) {
            return n(t);
          }),
          $ne: l(function(n, t) {
            return n(t);
          }),
          $gt: a(function(n, t) {
            return n(t);
          }),
          $gte: a(function(n, t) {
            return n(t);
          }),
          $lt: a(function(n, t) {
            return n(t);
          }),
          $lte: a(function(n, t) {
            return n(t);
          }),
          $mod: a(function(n, t) {
            return n(t);
          }),
          $in: function(n, t) {
            return n(t);
          },
          $nin: function(n, t) {
            return n(t);
          },
          $not: function(n, t, r, e) {
            return n(t, r, e);
          },
          $type: function(n, t) {
            return n(t);
          },
          $all: function(n, t, r, e) {
            return p.$and(n, t, r, e);
          },
          $size: function(n, t) {
            return !!t && n === t.length;
          },
          $or: function(n, t, r, e) {
            for (var u = 0, o = n.length; u < o; u++)
              if (s(c(n, u), t, r, e)) return !0;
            return !1;
          },
          $nor: function(n, t, r, e) {
            return !p.$or(n, t, r, e);
          },
          $and: function(n, t, r, e) {
            for (var u = 0, o = n.length; u < o; u++)
              if (!s(c(n, u), t, r, e)) return !1;
            return !0;
          },
          $regex: a(function(n, t) {
            return "string" == typeof t && n.test(t);
          }),
          $where: function(n, t, r, e) {
            return n.call(t, t, r, e);
          },
          $elemMatch: function(n, t, r, e) {
            return u(t)
              ? !!~(function(n, t) {
                  for (var r = 0; r < n.length; r++) {
                    c(n, r);
                    if (s(t, c(n, r))) return r;
                  }
                  return -1;
                })(t, n)
              : s(n, t, r, e);
          },
          $exists: function(n, t, r, e) {
            return e.hasOwnProperty(r) === n;
          }
        },
        g = {
          $eq: function(n, t, r) {
            return n instanceof RegExp
              ? a(function(t) {
                  return "string" == typeof t && n.test(t);
                })
              : n instanceof Function
              ? a(n)
              : u(n) && !n.length
              ? a(function(n) {
                  return u(n) && !n.length;
                })
              : a(
                  null === n
                    ? function(n) {
                        return null == n;
                      }
                    : function(t) {
                        return 0 === r.compare(f(t), f(n));
                      }
                );
          },
          $gt: function(n, t, r) {
            return function(t) {
              return r.compare(f(t), f(n)) > 0;
            };
          },
          $gte: function(n, t, r) {
            return function(t) {
              return r.compare(f(t), f(n)) >= 0;
            };
          },
          $lt: function(n, t, r) {
            return function(t) {
              return r.compare(f(t), f(n)) < 0;
            };
          },
          $lte: function(n, t, r) {
            return function(t) {
              return r.compare(f(t), f(n)) <= 0;
            };
          },
          $in: function(n, t, r) {
            return function(t) {
              if (!(t instanceof Array)) {
                var e = f(t);
                if (e === t && "object" == typeof t)
                  for (o = n.length; o--; )
                    if (
                      String(n[o]) === String(t) &&
                      "[object Object]" !== String(t)
                    )
                      return !0;
                if (void 0 === e)
                  for (o = n.length; o--; ) if (null == n[o]) return !0;
                for (o = n.length; o--; ) {
                  var u = s(y(c(n, o), r), t, o, n);
                  if (
                    u &&
                    "[object Object]" !== String(u) &&
                    "[object Object]" !== String(t)
                  )
                    return !0;
                }
                return !!~n.indexOf(e);
              }
              for (var o = t.length; o--; )
                if (~n.indexOf(f(c(t, o)))) return !0;
              return !1;
            };
          },
          $nin: function(n, t, r) {
            const e = g.$in(n, t, r);
            return function(n, t, r, u) {
              return !e(n, t, r, u);
            };
          },
          $mod: function(n) {
            return function(t) {
              return t % n[0] == n[1];
            };
          },
          $ne: function(n, t, r) {
            const e = g.$eq(n, t, r);
            return l(function(n, t, r, u) {
              return !e(n, t, r, u);
            });
          },
          $and: function(n, t, r) {
            return n.map(h(r));
          },
          $all: function(n, t, r) {
            return g.$and(n, t, r);
          },
          $or: function(n, t, r) {
            return n.map(h(r));
          },
          $nor: function(n, t, r) {
            return n.map(h(r));
          },
          $not: function(n, t, r) {
            const e = h(r)(n);
            return function(n, t, r) {
              return !s(e, n, t, r);
            };
          },
          $type: function(n) {
            return function(t, r, e) {
              return null != t && (t instanceof n || t.constructor == n);
            };
          },
          $regex: function(n, t) {
            return new RegExp(n, t.$options);
          },
          $where: function(n) {
            return "string" == typeof n
              ? new Function("obj", "return " + n)
              : n;
          },
          $elemMatch: function(n, t, r) {
            return h(r)(n);
          },
          $exists: function(n) {
            return !!n;
          }
        };
      function $(n, t) {
        return { a: n, v: t };
      }
      function v(n, t) {
        var r = [];
        if (
          ((function n(t, r, e, o, i) {
            if (e === r.length || null == t)
              return void i.push([t, r[e - 1], o]);
            var f = c(r, e);
            if (u(t) && isNaN(Number(f)))
              for (var a = 0, l = t.length; a < l; a++) n(c(t, a), r, e, t, i);
            else n(c(t, f), r, e + 1, t, i);
          })(t, n.k, 0, t, r),
          1 === r.length)
        ) {
          var e = r[0];
          return s(n.nv, e[0], e[1], e[2]);
        }
        for (
          var o = n && n.q && void 0 !== n.q.$ne, i = o, f = 0;
          f < r.length;
          f++
        ) {
          var a = r[f],
            l = s(n.nv, a[0], a[1], a[2]);
          o ? (i &= l) : (i |= l);
        }
        return i;
      }
      function d(n, t, r) {
        return { a: { k: n, nv: t, q: r }, v: v };
      }
      function h(n) {
        var t = function(n) {
            var t;
            return (
              (n &&
                ((t = n) &&
                  (t.constructor === Object ||
                    t.constructor === Array ||
                    "function Object() { [native code] }" ===
                      t.constructor.toString() ||
                    "function Array() { [native code] }" ===
                      t.constructor.toString()))) ||
                (n = { $eq: n }),
              n
            );
          },
          r = function(t) {
            t = f(t);
            var r = [];
            for (var u in t) {
              var o = t[u];
              if ("$options" !== u) {
                var i = p[u] || (n && n.expressions && n.expressions[u]);
                if (i) g[u] && (o = g[u](o, t, n)), r.push($(f(o), i));
                else {
                  if (36 === u.charCodeAt(0))
                    throw new Error("Unknown operation " + u);
                  var c = u.split(".");
                  r.push(d(c, e(o), o));
                }
              }
            }
            return 1 === r.length ? r[0] : $(r, p.$and);
          },
          e = function(n) {
            return (
              (n = t(n)),
              -1 ===
              (function n(t, r) {
                if (!o(t)) return r;
                for (var e in t) r.push(e), n(t[e], r);
                return r;
              })(n, [])
                .join(",")
                .search(/[$.]/)
                ? $(n, b)
                : r(n)
            );
          };
        return function(n) {
          return r(t(n));
        };
      }
      function b(n, t) {
        if (
          Object.prototype.toString.call(n) !==
          Object.prototype.toString.call(t)
        )
          return !1;
        if (o(n)) {
          if (Object.keys(n).length !== Object.keys(t).length) return !1;
          for (var r in n) if (!b(n[r], t[r])) return !1;
          return !0;
        }
        if (u(n)) {
          if (n.length !== t.length) return !1;
          for (var e = 0, i = n.length; e < i; e++)
            if (!b(n[e], t[e])) return !1;
          return !0;
        }
        return n === t;
      }
      function y(n, t) {
        var r = h(t)(n);
        return (
          t &&
            t.select &&
            (r = {
              a: r,
              v: function(n, r, e, u) {
                return s(n, r && t.select(r), e, u);
              }
            }),
          r
        );
      }
      function j(n, t) {
        var r = y(n, (t = Object.assign({ compare: m }, t)));
        return function(n, t, e) {
          return s(r, n, t, e);
        };
      }
      function m(n, t) {
        if (b(n, t)) return 0;
        if (typeof n == typeof t) {
          if (n > t) return 1;
          if (n < t) return -1;
        }
      }
    }
  ]);
});
